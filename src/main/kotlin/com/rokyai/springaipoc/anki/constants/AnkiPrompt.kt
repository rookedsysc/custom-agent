package com.rokyai.springaipoc.anki.constants

const val ANKI_PROMPT = """
# 기술 면접 답변 평가 및 모범 답안 생성

input으로 제공된 기술 개념 질문과 답변을 'CLEAR' 5단계 기준으로 평가하고 모범 답안을 생성해줘.

## 평가 대상

이 프롬프트는 순수 기술/개념 질문에 대한 답변 평가용이야:
- "REST API란 무엇인가요?"
- "OOP의 4대 원칙을 설명해주세요."
- "트랜잭션의 ACID 속성이란?"
- "인덱스가 왜 필요한가요?"
- "동기와 비동기의 차이점은?"

## 평가 기준: 'CLEAR' 5단계

### 1단계: Concept (개념 정의) - 20점

핵심 질문:
- 핵심 개념을 정확하게 정의했는가?
- 한 문장으로 명확하게 설명할 수 있는가?

예시 (REST API란?):

❌ 나쁜 답변: "API의 한 종류입니다."
- 정의가 모호하고 핵심을 놓침

✅ 좋은 답변: "REST API는 HTTP 프로토콜을 기반으로 자원(Resource)을 URI로 표현하고, HTTP 메서드(GET, POST, PUT, DELETE)를 통해 자원에 대한 행위를 정의하는 아키텍처 스타일입니다."

### 2단계: Logic (원리/동작 방식) - 20점

핵심 질문:
- 왜 그렇게 동작하는가?
- 내부 원리를 이해하고 있는가?
- 동작 흐름을 설명할 수 있는가?

예시 (인덱스가 왜 필요한가요?):

❌ 나쁜 답변: "검색이 빨라집니다."
- 왜 빨라지는지 원리 설명 없음

✅ 좋은 답변: "인덱스는 B-Tree 또는 B+Tree 자료구조를 사용하여 데이터를 정렬된 상태로 유지합니다. 
- Full Table Scan의 시간복잡도: O(n)
- 인덱스 사용 시: O(log n)
- 예: 100만 건 테이블에서 Full Scan은 100만 번, 인덱스는 약 20번의 비교로 탐색 가능"

### 3단계: Example (예시/비유) - 20점

핵심 질문:
- 구체적인 예시를 들 수 있는가?
- 실제 코드나 상황으로 설명할 수 있는가?
- 비전공자도 이해할 수 있는 비유가 있는가?

예시 (동기와 비동기의 차이):

❌ 나쁜 답변: "동기는 순차적이고 비동기는 동시에 처리됩니다."
- 추상적, 예시 없음

✅ 좋은 답변: "커피숍에 비유하면:
- 동기: 한 명이 주문하고 커피 받을 때까지 다음 손님은 대기 (줄이 길어짐)
- 비동기: 주문하면 진동벨 받고 옆으로 비켜서 대기, 다음 손님 바로 주문 가능

```python
# 동기 방식
result = db.query("SELECT * FROM users")  # 완료까지 블로킹
print(result)

# 비동기 방식
async def get_users():
    result = await db.query("SELECT * FROM users")  # 대기 중 다른 작업 가능
    return result
```

### 4단계: Application (활용/적용) - 20점

핵심 질문:
- 언제, 어디서 사용하는가?
- 실제 프로젝트에서 어떻게 적용하는가?
- 어떤 상황에서 유용한가?

예시 (OOP의 다형성):

❌ 나쁜 답변: "코드 재사용에 좋습니다."
- 구체적 활용 사례 없음

✅ 좋은 답변: "다형성은 다음과 같은 상황에서 활용됩니다:
- 결제 시스템: `PaymentProcessor` 인터페이스로 카드결제, 계좌이체, 카카오페이 등 다양한 구현체를 동일하게 처리
- 알림 시스템: `NotificationService`로 이메일, SMS, 푸시알림을 동일한 인터페이스로 발송
- 장점: 새로운 결제 수단 추가 시 기존 코드 수정 없이 새 클래스만 추가 (OCP 원칙)"

### 5단계: Relation (관련 개념/심화) - 20점

핵심 질문:
- 관련된 개념은 무엇인가?
- 장단점과 트레이드오프는?
- 대안이나 비교할 개념은?

예시 (Redis란?):

❌ 나쁜 답변: "인메모리 캐시입니다."
- 다른 기술과의 비교, 트레이드오프 없음

✅ 좋은 답변: "Redis는 인메모리 Key-Value 저장소입니다.
- vs Memcached: Redis는 다양한 자료구조(List, Set, Hash) 지원, Persistence 가능
- vs RDBMS: 메모리 기반으로 빠르지만 데이터 영속성은 약함
- 트레이드오프: 
  - 장점: 초고속 읽기/쓰기 (μs 단위)
  - 단점: 메모리 크기 제한, 복잡한 쿼리 불가
- 관련 개념: 캐싱 전략(Cache-Aside, Write-Through), TTL, Pub/Sub"

## 평가 항목

### 필수 체크리스트
- [ ] 정확성: 개념이 기술적으로 정확한가?
- [ ] 명확성: 한 문장으로 핵심을 설명할 수 있는가?
- [ ] 원리 이해: 왜 그런지 설명할 수 있는가?
- [ ] 구체적 예시: 코드나 실제 상황 예시가 있는가?
- [ ] 활용 능력: 언제 어디서 사용하는지 아는가?
- [ ] 연결성: 관련 개념을 연결지어 설명하는가?
- [ ] 트레이드오프: 장단점과 대안을 인지하는가?

### 감점 요소
- ❌ 부정확한 정의: 틀린 개념 설명
- ❌ 암기식 답변: "~라고 들었습니다", 원리 이해 없음
- ❌ 예시 부재: 추상적 설명만 나열
- ❌ 깊이 부족: 표면적 답변, 후속 질문에 답변 불가
- ❌ 연결 부재: 단편적 지식, 관련 개념과 연결 못함
- ❌ 실무 감각 부재: 이론만 알고 활용을 모름

## 평가 프로세스

**전제 조건: 사용자가 작성한 답변이 제공된 경우에만 1-3단계 평가를 수행합니다.**
**답변이 없는 경우, 1-3단계를 건너뛰고 4단계(정보 검색 및 모범 답안 생성)만 수행합니다.**

1. 답변 분석 (사용자 답변이 있는 경우에만)
   - CLEAR 5단계 각 요소가 있는지 확인
   - 기술적 정확성 검증
   - 답변의 깊이와 논리 흐름 평가

2. 점수 산정 (사용자 답변이 있는 경우에만, 각 단계별 20점, 총 100점)
   - Concept (개념 정의): /20점
   - Logic (원리/동작 방식): /20점
   - Example (예시/비유): /20점
   - Application (활용/적용): /20점
   - Relation (관련 개념/심화): /20점

3. 상세 피드백 작성 (사용자 답변이 있는 경우에만)
   - 각 단계별 강점과 약점 지적
   - 기술적 오류 수정
   - 구체적인 개선 방향 제시

4. 정보 검색 (모범 답안 생성 시)
   - 인터넷 검색 우선: 잘 알려지지 않은 내용이나 최신 정보는 WebSearch를 먼저 사용
   - Context7 활용: 공식 문서, 라이브러리 사용법, 프레임워크 패턴은 Context7로 검색
   - 출처 표기 필수: 각 내용별로 반드시 출처 링크를 표기

## 출력 형식

### 모범 답변 작성 요구사항 (필수)

모범 답변은 면접관에게 직접 말로 전달할 수 있는 완성된 답변으로 작성해야 합니다:
- 플레이스홀더(`[내용]`)가 아닌 실제 내용이 채워진 답변
- 구체적인 코드 예시, 수치, 비교 테이블 포함
- 출처 링크와 함께 기술적 주장 근거 제시
- 면접에서 바로 사용할 수 있는 자연스러운 문장 구성

아래 양식대로 작성

```markdown
## [질문 제목]

<details>
<summary>꼬리 질문</summary>
<div>

- [답변의 깊이를 확인하는 질문]
- [트레이드오프를 확인하는 질문]
- [비교/실무 적용 질문]

</div>
</details>

<!-- 사용자가 작성한 답변이 제공된 경우에만 아래 섹션 포함 -->
<details>
<summary>내 답변 & 평가 결과 (사용자 답변이 있는 경우에만 포함)</summary>
<div>

- 내 답변

[사용자가 작성한 원본 답변을 그대로 인용]

- 평가 결과

총점: X/100점

Concept - 개념 정의 (X/20점)
- 정확성:
- 강점:
- 약점:
- 개선 방향:

Logic - 원리/동작 방식 (X/20점)
- 정확성:
- 강점:
- 약점:
- 개선 방향:

Example - 예시/비유 (X/20점)
- 강점:
- 약점:
- 개선 방향:

Application - 활용/적용 (X/20점)
- 강점:
- 약점:
- 개선 방향:

Relation - 관련 개념/심화 (X/20점)
- 강점:
- 약점:
- 개선 방향:

</div>
</details>

<details>
<summary>모범 답변 보기</summary>
<div>

💬 면접 답변 (2-3분 분량)

[면접관에게 직접 말로 전달할 완성된 답변을 여기에 작성.
개념 정의 → 원리 → 예시 → 활용 → 관련 개념 순서로 자연스럽게 연결.
"~입니다", "~했습니다" 등 실제 면접 어투로 작성.
예: "REST API는 HTTP 프로토콜을 기반으로 자원을 URI로 표현하고... (중략) ...이러한 이유로 RESTful 설계가 중요합니다."]

---

📋 상세 분석 (암기/복습용)

- 핵심 포인트 💡: 
  - [핵심 포인트 1]
  - [핵심 포인트 2]
  - [핵심 포인트 3]

Concept - 개념 정의

[한 문장으로 핵심 개념 정의]

Logic - 원리/동작 방식

[왜 그런지, 어떻게 동작하는지 설명]
- 동작 원리 1: [설명]
- 동작 원리 2: [설명]

Example - 예시/비유

- 일상 비유: [비전공자도 이해할 수 있는 비유]
- 코드 예시:
  ```[언어]
  // 구체적인 코드 예시
  ```

Application - 활용/적용

- 사용하는 경우:
  - [사용 사례 1]
  - [사용 사례 2]
- 사용하지 않는 경우:
  - [피해야 할 상황]

Relation - 관련 개념/심화

- 관련 개념:
  - [관련 개념 1]: [간단 설명]
  - [관련 개념 2]: [간단 설명]
- 비교:
  | 구분 | [개념 A] | [개념 B] |
  |------|----------|----------|
  | 특징 | | |
  | 장점 | | |
  | 단점 | | |
- 트레이드오프:
  - 장점: 
  - 단점: 

</div>
</details>
```

## 작성 가이드

### 답안 작성 시 주의사항

1. 기술적 정확성: 불확실한 내용은 웹 검색으로 확인
2. 실제 코드: 동작하는 구현 예시 포함
3. 출처 명시: 기술적 내용에는 출처 제공
   - 출처 형식: `[출처명](링크)`
   - 출처 다음 줄: `> 위 출처에서 "원문 인용" 이라고 명시되어 있음.`
4. 단계적 깊이: 개념 → 원리 → 예시 → 활용 → 심화 순으로 깊이 있게 작성
5. 실무 연결: 이론에 그치지 않고 실제 사용 사례 포함

### 꼬리 질문 작성 기준

- 깊이를 확인하는 질문 (예: "내부적으로 어떻게 동작하나요?")
- 트레이드오프 질문 (예: "단점은 무엇인가요?")
- 비교 질문 (예: "A와 B의 차이점은?")
- 실무 적용 질문 (예: "실제로 사용해본 경험이 있나요?")

### Markdown 문법 주의사항

- h tag 사용 금지, li tag depth로 구분
- div 태그 밑에 markdown이 들어오는 경우 반드시 사이에 공백 있어야 함
- markdown 문법으로 작성
"""
